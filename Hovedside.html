<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hovedsiden</title>

  <!-- Ikon og ikoner fra Font Awesome -->
  <link rel="icon" type="image/png" href="https://static.wixstatic.com/media/fd2fb2_39376e4ee55b460ab7a3ebbfcf35fef7~mv2.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    /* ===== RESET OG GRUNNLEGGENDE ===== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      font-family: Arial, sans-serif;
      background: #091B1E;
      color: white;
      overflow-x: hidden;
    }

    /* ===== VERTIKAL NAVIGASJON ===== */
    .vertical-nav {
      width: 70px;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    .nav-icons-wrapper {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }
    .profilmeny img {
      width: 48px; height: 48px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fff;
    }
    .nav-icon {
      color: white; font-size: 22px;
      text-decoration: none; padding: 16px 0;
      transition: color 0.3s ease;
    }
    .nav-icon:hover, .nav-icon.active { color: #00FFCC; }

    /* ===== MAIN ===== */
    main { margin-left: 70px; padding: 20px 10px; }
    .content-wrapper { max-width: 1100px; margin: 0 auto; }

    /* Header */
    .top-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
    .watch-logo { width: 200px; }
    .header-profil img {
      width: 40px; height: 40px;
      border-radius: 50%; border: 2px solid #fff;
    }

    /* Hero-banner */
    .hero-banner {
      position: relative; height: 350px;
      border-radius: 12px; overflow: hidden;
      margin-bottom: 30px; border: 2px solid #00FFCC;
    }
    .banner-image { width: 100%; height: 100%; object-fit: cover; }
    .banner-content { position: absolute; top: 50%; left: 30px; transform: translateY(-50%); }
    .film-logo { width: 300px; }

    /* Gallerier */
    .gallery-section { margin-bottom: 20px; }
    .gallery-section h2 { color: #00FFCC; font-size: 18px; margin-bottom: 12px; padding-left: 16px; }

    .gallery-wrapper { position: relative; display: flex; align-items: center; }
    .image-gallery { display: flex; overflow-x: auto; gap: 16px; padding: 10px 16px; scroll-behavior: smooth; }
    .image-gallery::-webkit-scrollbar { display: none; }
    .image-gallery a img {
      width: 220px; height: 124px;
      border-radius: 5px; object-fit: cover;
      transition: transform 0.3s ease;
    }
    .image-gallery a:hover img { transform: scale(1.05); }

    /* Scroll-knapper + fade */
    .scroll-button {
      position: absolute; top: 50%; transform: translateY(-50%);
      background: none; border: none; color: white; font-size: 28px;
      cursor: pointer; opacity: 0; transition: opacity 0.3s;
    }
    .scroll-button.left { left: 0; }
    .scroll-button.right { right: 0; }
    .gallery-wrapper:hover .scroll-button { opacity: 1; }
    .fade-left, .fade-right {
      position: absolute; top: 0; bottom: 0; width: 70px;
      pointer-events: none; opacity: 0; transition: opacity 0.3s;
    }
    .fade-left { left: 0; background: linear-gradient(to right,#091B1E,transparent); }
    .fade-right { right: 0; background: linear-gradient(to left,#091B1E,transparent); }
    .gallery-wrapper:hover .fade-left, .gallery-wrapper:hover .fade-right { opacity: 1; }

    /* Fremdriftslinje */
    .progress-bar {
      position: absolute; bottom: 0; left: 0;
      height: 4px; width: 100%;
      background: rgba(255,255,255,0.2);
    }
    .progress-bar::after {
      content: ''; position: absolute; top: 0; left: 0; height: 100%;
      background: #00FFCC; width: var(--progress,0%);
    }

    /* Kommende filmer */
    .coming-soon-gallery { display: flex; gap: 12px; padding: 10px 16px; }
    .coming-card { display: flex; gap: 10px; background: none; }
    .coming-card img { width: 80px; height: 120px; border-radius: 4px; object-fit: cover; }
    .coming-info h3 { font-size: 16px; margin-bottom: 4px; }

    /* Footer */
    .footer { text-align: center; padding: 30px 20px; margin-top: 50px; }
    .footer-links { display: flex; justify-content: center; gap: 15px; margin-top: 12px; }
    .footer-links a { color: #b1b1b1; font-size: 14px; text-decoration: none; }
    .footer-links a:hover { color: #00FFCC; }
  </style>
</head>
<body>
  <!-- ===== Navigasjon ===== -->
  <div class="vertical-nav">
    <div class="nav-icons-wrapper">
      <div class="profilmeny" onclick="gåTilKonto()">
        <img id="menyProfilbilde" src="https://via.placeholder.com/100" alt="Min profil" />
      </div>
      <a href="Søk.html" class="nav-icon"><i class="fas fa-search"></i></a>
      <a href="Hovedside.html" class="nav-icon active"><i class="fas fa-house"></i></a>
      <a href="Film.html" class="nav-icon"><i class="fas fa-film"></i></a>
      <a href="Serier.html" class="nav-icon"><i class="fas fa-tv"></i></a>
      <a href="Min-Liste.html" class="nav-icon"><i class="fas fa-bookmark"></i></a>
    </div>
  </div>

  <!-- ===== Hovedinnhold ===== -->
  <main>
    <div class="content-wrapper">
      <div class="top-header">
        <img class="watch-logo" src="https://static.wixstatic.com/media/fd2fb2_a4b2ace62dff4605a0387f46aad8a404~mv2.png" alt="Watch Logo" />
        <div class="header-profil" onclick="gåTilKonto()">
          <img id="headerProfilbilde" src="https://via.placeholder.com/100" alt="Profil" />
        </div>
      </div>

      <!-- Hero-banner -->
      <section class="hero-banner">
        <img class="banner-image" src="https://images.justwatch.com/backdrop/302954938/s640/olsenbanden-siste-skrik" alt="Film Banner">
        <div class="banner-content">
          <img class="film-logo" src="https://static.wixstatic.com/media/fd2fb2_8511f368adb94b0f861f4ee2485d04de~mv2.png" alt="Film Logo">
        </div>
      </section>

      <!-- Gallerier -->
      <section class="gallery-section">
        <h2>Nye filmer på Watch</h2>
        <div class="gallery-wrapper">
          <div class="fade-left"></div>
          <button class="scroll-button left">❮</button>
          <div class="image-gallery" id="nye-filmer"></div>
          <button class="scroll-button right">❯</button>
          <div class="fade-right"></div>
        </div>
      </section>

   <section class="gallery-section">
  <h2>Sjangere</h2>
  <div class="gallery-wrapper">
    <div class="fade-left"></div>
    <button class="scroll-button left" onclick="scrollGallery(this, -1)">❮</button>
    <div class="image-gallery genre-gallery">
    <a href="sjanger.html?navn=barn">Barn / Familie <i class="fas fa-rocket"></i></a>
      <a href="sjanger.html?navn=komedie">Komedie <i class="fas fa-laugh"></i></a>
      <a href="sjanger.html?navn=skrekk">Skrekk <i class="fas fa-ghost"></i></a>
      <a href="sjanger.html?navn=drama">Drama <i class="fas fa-theater-masks"></i></a>
      <a href="sjanger.html?navn=romantikk">Romantikk <i class="fas fa-heart"></i></a>
      <a href="sjanger.html?navn=action">Action <i class="fas fa-bolt"></i></a>
    </div>
    <button class="scroll-button right" onclick="scrollGallery(this, 1)">❯</button>
    <div class="fade-right"></div>
  </div>
</section>

    <section class="gallery-section">
        <h2>Populære nå</h2>
        <div class="gallery-wrapper">
          <div class="fade-left"></div>
          <button class="scroll-button left">❮</button>
          <div class="image-gallery">
            <a href="film.html?navn=hook"><img src="https://static.wixstatic.com/media/fd2fb2_3b5f5cd114b746e8b05881724a22a0e5~mv2.jpg" alt="Hook"></a>
          </div>
          <button class="scroll-button right">❯</button>
          <div class="fade-right"></div>
        </div>
      </section>

      <section class="gallery-section">
        <h2>Kommende filmer</h2>
        <div class="gallery-wrapper">
          <div class="fade-left"></div>
          <button class="scroll-button left">❮</button>
          <div class="image-gallery coming-soon-gallery" id="kommende-filmer"></div>
          <button class="scroll-button right">❯</button>
          <div class="fade-right"></div>
        </div>
      </section>

      <section class="gallery-section">
        <h2>Barn</h2>
        <div class="gallery-wrapper">
          <div class="fade-left"></div>
          <button class="scroll-button left">❮</button>
          <div class="image-gallery" id="barn-filmer"></div>
          <button class="scroll-button right">❯</button>
          <div class="fade-right"></div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="footer">
        <img class="footer-logo" src="https://static.wixstatic.com/media/fd2fb2_a4b2ace62dff4605a0387f46aad8a404~mv2.png" alt="Watch Logo" />
        <div class="footer-links">
          <a href="om.html">Om Watch Nordic</a>
          <a href="personvern.html">Personvern</a>
          <a href="vilkar.html">Vilkår</a>
          <a href="hjelp.html">Hjelp</a>
        </div>
        <div class="footer-copy">© 2025 Watch Nordic Group</div>
      </footer>
    </div>
  </main>

  <!-- ===== Script ===== -->
  <script type="module">
    import { filmer } from "./filmdata.js";

    // Autentisering
    const epost = localStorage.getItem("epost");
    const passord = localStorage.getItem("passord");
    if (!epost || !passord) window.location.href = "Starts side.html";
    window.addEventListener("storage", () => {
      if (!localStorage.getItem("epost") || !localStorage.getItem("passord")) {
        window.location.href = "Starts side.html";
      }
    });

    // Navigasjon
    window.gåTilKonto = () => window.location.href = "konto.html";

    // Profilbilde
    const bilde = localStorage.getItem("profilbilde");
    if (bilde) {
      document.getElementById("menyProfilbilde").src = bilde;
      document.getElementById("headerProfilbilde").src = bilde;
    }

    // Scroll-funksjon
    document.querySelectorAll(".gallery-wrapper").forEach(wrapper => {
      const gallery = wrapper.querySelector(".image-gallery");
      const left = wrapper.querySelector(".scroll-button.left");
      const right = wrapper.querySelector(".scroll-button.right");
      const fadeLeft = wrapper.querySelector(".fade-left");
      const fadeRight = wrapper.querySelector(".fade-right");

      const update = () => {
        const max = gallery.scrollWidth - gallery.clientWidth;
        left.classList.toggle("hidden", gallery.scrollLeft <= 0);
        right.classList.toggle("hidden", gallery.scrollLeft >= max);
      };

      left?.addEventListener("click", () => gallery.scrollBy({ left: -300, behavior: "smooth" }));
      right?.addEventListener("click", () => gallery.scrollBy({ left: 300, behavior: "smooth" }));
      gallery.addEventListener("scroll", update);
      update();
    });

    // Fremdrift
    document.querySelectorAll(".progress-bar").forEach(bar => {
      const p = bar.getAttribute("data-progress");
      if (p) bar.style.setProperty("--progress", p+"%");
    });

    // Bygg filmgallerier
    const lagFilm = (film) => {
      const a = document.createElement("a");
      a.href = film.watchUrl;
      a.innerHTML = `<img src="${film.poster}" alt="${film.tittel}">`;
      return a;
    };
    const lagKommende = (film) => {
      const d = document.createElement("div");
      d.className = "coming-card";
      d.innerHTML = `
        <img src="${film.poster}" alt="${film.tittel}">
        <div class="coming-info">
          <p class="date">${new Date(film.publishDate).toLocaleDateString("no-NO")}</p>
          <h3>${film.tittel}</h3>
          <p class="desc">${film.beskrivelse}</p>
        </div>`;
      return d;
    };

    for (const film of Object.values(filmer)) {
      if (!film.publishDate || new Date(film.publishDate) <= new Date()) {
        document.getElementById("nye-filmer")?.appendChild(lagFilm(film));
      }
      if (film.publishDate && new Date(film.publishDate) > new Date()) {
        document.getElementById("kommende-filmer")?.appendChild(lagKommende(film));
      }
      if (film.metadata.some(m => /barn|familie/i.test(m))) {
        document.getElementById("barn-filmer")?.appendChild(lagFilm(film));
      }
    }
  </script>
</body>
</html>

