<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Serie mal</title>
  <link rel="icon" type="image/png" href="https://static.wixstatic.com/media/fd2fb2_39376e4ee55b460ab7a3ebbfcf35fef7~mv2.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
/* ---- Alt fra din CSS beholdes ---- */

/* Endringer for episodemal */
.episodes-section {
  margin-left: 70px;
  padding: 40px 60px 60px 60px;
  background: black;
  transition: margin-left 0.3s ease;
}

.vertical-nav.collapsed ~ .episodes-section {
  margin-left: 0;
}

.episodes-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 20px;
  margin-bottom: 18px;
}

.episodes-header h2 {
  font-size: 24px;
  margin: 0;
}

.season-select {
  background: #091B1E;
  color: #fff;
  border: 1px solid #00FFCC;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.episodes-gallery {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: flex-start;
  margin-top: 20px;
}

.episode-card {
  background: #111;
  border-radius: 10px;
  overflow: hidden;
  width: 200px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.episode-card:hover {
  transform: scale(1.05);
}

.episode-card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
}

.episode-info {
  padding: 10px;
  font-size: 13px;
}

.episode-info strong {
  display: block;
  margin-bottom: 6px;
  color: #fff;
}
  </style>
</head>
<body>

<!-- Navigasjon beholdes -->
<div class="vertical-nav" id="verticalNav">
  <div class="profilmeny">
    <a href="konto.html">
      <img id="menyProfilbilde" src="https://via.placeholder.com/100" alt="Min profil" />
    </a>
  </div>
  <a href="Søk.html" class="nav-icon"><i class="fas fa-search"></i></a>
  <a href="Hovedside.html" class="nav-icon"><i class="fas fa-house"></i></a>
  <a href="Film.html" class="nav-icon"><i class="fas fa-film"></i></a>
  <a href="Serier.html" class="nav-icon active"><i class="fas fa-tv"></i></a>
  <a href="Min-Liste.html" class="nav-icon"><i class="fas fa-bookmark"></i></a>
</div>

<button class="menu-toggle" id="menuToggle"><i class="fas fa-chevron-left"></i></button>

<!-- Hero beholdes -->
<div class="hero">
  <img class="background-image" id="backgroundImage" src="" alt="Bakgrunnsbilde" />
  <video id="trailerVideo" class="background-video" muted playsinline></video>
  <div class="overlay"></div>
  <div class="bottom-fade"></div>
  <div id="videoControls" class="video-controls">
    <button id="pauseBtn"><i class="fas fa-pause"></i></button>
    <button id="soundBtn"><i class="fas fa-volume-mute"></i></button>
  </div>

  <div class="content-wrapper">
    <div class="logo-container">
      <img class="film-logo" src="" alt="Serielogo" />
    </div>
    <div class="left-content">
      <div class="text-button-container">
        <div class="buttons-column">
          <button class="watch-button" id="watchBtn">
            <i class="fas fa-play"></i><span> Spill episode 1</span>
          </button>
          <button class="watch-button" id="addToListBtn">
            <i class="fas fa-plus"></i><span> Legg til i Min liste</span>
          </button>
        </div>
        <div class="text-container">
          <p class="description"></p>
          <div class="metadata"></div>
        </div>
        <div class="cast-info"></div>
      </div>
    </div>
  </div>
</div>

<!-- Episoder-seksjon -->
<div class="episodes-section">
  <div class="episodes-header">
    <h2>Episoder</h2>
    <select id="seasonSelect" class="season-select"></select>
  </div>
  <div class="episodes-gallery" id="episodesGallery"></div>
</div>

<!-- Bunntekst -->
<footer class="site-footer">
  <p>&copy; 2025 Watch Nordic Grupe</p>
  <div class="footer-links">
    <a href="Om-oss.html">Om oss</a> |
    <a href="Kontakt.html">Kontakt</a> |
    <a href="Personvern.html">Personvern</a>
  </div>
</footer>

<script src="serie.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const serieNavn = params.get("navn");
const data = serier[serieNavn]; // fra serie.js

if (!data) {
  alert("Serien finnes ikke.");
  window.location.href = "Hovedside.html";
}

// Sett tittel, bilder og tekst
document.title = data.tittel;
document.getElementById("backgroundImage").src = data.bakgrunn;
document.querySelector(".film-logo").src = data.logo;
document.querySelector(".description").textContent = data.beskrivelse;

// Metadata
const metadataEl = document.querySelector(".metadata");
metadataEl.innerHTML = data.metadata.map((m) => `<span>${m}</span><span>•</span>`).join("");

// Cast
document.querySelector(".cast-info").innerHTML = `
  <p><strong>Medvirkende:</strong> ${data.skuespillere}</p>
  <p><strong>Skaper:</strong> ${data.skaper}</p>
`;

// ---- Sesongvelger ----
const seasonSelect = document.getElementById("seasonSelect");
const episodesGallery = document.getElementById("episodesGallery");

data.sesonger.forEach((s, index) => {
  const opt = document.createElement("option");
  opt.value = index;
  opt.textContent = "Sesong " + (index + 1);
  seasonSelect.appendChild(opt);
});

function visEpisoder(seasonIndex) {
  episodesGallery.innerHTML = "";
  const episoder = data.sesonger[seasonIndex].episoder;
  episoder.forEach((ep, i) => {
    const card = document.createElement("div");
    card.className = "episode-card";
    card.innerHTML = `
      <img src="${ep.bilde}" alt="Episode ${i+1}">
      <div class="episode-info">
        <strong>${i+1}. ${ep.tittel}</strong>
        <p>${ep.beskrivelse}</p>
      </div>
    `;
    card.addEventListener("click", () => {
      window.location.href = ep.watchUrl;
    });
    episodesGallery.appendChild(card);
  });
}

// Vis første sesong ved start
visEpisoder(0);

seasonSelect.addEventListener("change", (e) => {
  visEpisoder(e.target.value);
});

// ---- Min liste ----
const addToListBtn = document.getElementById("addToListBtn");
let minListe = JSON.parse(localStorage.getItem("minListe")) || [];

function oppdaterListeKnapp() {
  const icon = addToListBtn.querySelector("i");
  const text = addToListBtn.querySelector("span");
  if (minListe.includes(serieNavn)) {
    icon.className = "fas fa-check";
    text.textContent = " Lagt til i Min liste";
  } else {
    icon.className = "fas fa-plus";
    text.textContent = " Legg til i Min liste";
  }
}
oppdaterListeKnapp();

addToListBtn.addEventListener("click", () => {
  if (!minListe.includes(serieNavn)) {
    minListe.push(serieNavn);
  } else {
    minListe = minListe.filter(f => f !== serieNavn);
  }
  localStorage.setItem("minListe", JSON.stringify(minListe));
  oppdaterListeKnapp();
});

// ---- Meny-knapp ----
const menuToggle = document.getElementById("menuToggle");
const verticalNav = document.getElementById("verticalNav");
menuToggle.addEventListener("click", () => {
  verticalNav.classList.toggle("collapsed");
  menuToggle.classList.toggle("collapsed");
  const icon = menuToggle.querySelector("i");
  if (verticalNav.classList.contains("collapsed")) {
    icon.classList.replace("fa-chevron-left", "fa-chevron-right");
  } else {
    icon.classList.replace("fa-chevron-right", "fa-chevron-left");
  }
});

// ---- Profilbilde ----
const lagretBilde = localStorage.getItem("profilbilde");
if (lagretBilde) {
  document.getElementById("menyProfilbilde").src = lagretBilde;
}
</script>
</body>
</html>
